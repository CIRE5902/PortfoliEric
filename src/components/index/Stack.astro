---
// src/components/ProfileHeader.astro
import { Icon } from "astro-icon/components";
---

<div class="box-tech box-card">
    <div class="box-title box-title-tech">
        <Icon name="mdi:layers" class="tech-icons" />
        <h3 id="stackTitle">Stack</h3>
    </div>

    <div class="box-tech-categorys">
        <div class="globe-section" onclick="location.href='stack'">
            <canvas id="tagCanvas"></canvas>

            <div id="tags" style="display: none;">
                <ul>
                    <li>
                        <a href="#"
                            ><img
                                src="https://api.iconify.design/logos:linux-tux.svg"
                                alt="Linux"
                                class="tech-icons"
                            /></a
                        >
                    </li>
                    <li>
                        <a href="#"
                            ><img
                                src="https://api.iconify.design/logos:html-5.svg"
                                alt="HTML5"
                                class="tech-icons"
                            /></a
                        >
                    </li>
                    <li>
                        <a href="#"
                            ><img
                                src="https://api.iconify.design/logos:css-3.svg"
                                alt="CSS3"
                                class="tech-icons"
                            /></a
                        >
                    </li>
                    <li>
                        <a href="#"
                            ><img
                                src="https://api.iconify.design/logos:javascript.svg"
                                alt="JavaScript"
                                class="tech-icons"
                            /></a
                        >
                    </li>
                    <li>
                        <a href="#"
                            ><img
                                src="https://api.iconify.design/logos:react.svg"
                                alt="React"
                                class="tech-icons"
                            /></a
                        >
                    </li>
                    <li>
                        <a href="#"
                            ><img
                                src="https://api.iconify.design/logos:php.svg"
                                alt="PHP"
                                class="tech-icons"
                            /></a
                        >
                    </li>
                    <li>
                        <a href="#"
                            ><img
                                src="https://api.iconify.design/logos:java.svg"
                                alt="Java"
                                class="tech-icons"
                            /></a
                        >
                    </li>
                    <li>
                        <a href="#"
                            ><img
                                src="https://api.iconify.design/logos:git-icon.svg"
                                alt="Git"
                                class="tech-icons"
                            /></a
                        >
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>

<style>
    #tagCanvas {
        width: 100%;
        height: 100%;
        touch-action: none;
        -ms-touch-action: none;
        display: block;
        margin: auto;
        cursor: pointer;
    }

    .globe-section {
        text-align: center;
        width: 100%;
        height: 100%;
    }

    .tech-icons {
        width: 30px;
        height: 30px;
    }
</style>

<script defer src="https://www.goat1000.com/tagcanvas.min.js"></script>
<script>
    declare const TagCanvas: any;

    document.addEventListener("DOMContentLoaded", () => {
        const canvas = document.getElementById("tagCanvas");

        if (canvas) {
            try {
                TagCanvas.Start("tagCanvas", "tags", {
                    textColour: null,
                    outlineColour: "#ffffff",
                    reverse: true,
                    depth: 0.8,
                    maxSpeed: 0.05,
                    imageScale: 2,
                    weight: true,
                    clickToFront: 500,
                    shape: "sphere",
                    noSelect: true,
                    fadeIn: 1000,
                    initial: [0.1, -0.1],
                });
            } catch (e) {
                console.error("TagCanvas error:", e);
            }

            // Bloquear zoom por scroll
            canvas.addEventListener(
                "wheel",
                (e) => {
                    if (canvas.matches(":hover")) {
                        // e.preventDefault();
                    }
                },
                { passive: false },
            );

            // Bloquear zoom por teclado
            window.addEventListener("keydown", (e) => {
                if (
                    (e.ctrlKey || e.metaKey) &&
                    ["+", "-", "="].includes(e.key) &&
                    canvas.matches(":hover")
                ) {
                    e.preventDefault();
                }
            });
        }
    });
</script>
